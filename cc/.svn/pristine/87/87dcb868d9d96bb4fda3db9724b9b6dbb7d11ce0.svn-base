package com.ly.task;

import javax.mail.MessagingException;
import javax.mail.internet.MimeMessage;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.mail.javamail.JavaMailSenderImpl;
import org.springframework.mail.javamail.MimeMessageHelper;
import org.springframework.scheduling.annotation.Scheduled;
import org.springframework.stereotype.Component;

import com.ly.email.MailUtils;

@Component
public class JobTask {

	@Autowired
	private MailUtils mailUtils;
	
	private static Logger logger = Logger.getLogger(JobTask.class); // 获取logger实例

	@Scheduled(cron = "0/15 *  *  * * ? ") // 每5秒执行一次
	public void task01() throws MessagingException {
		StringBuffer emailBf = new StringBuffer();
		logger.info("普通Info信息");
		// logger.error("报错信息", new IllegalArgumentException("非法参数"));

		
		String tabTitle = "<table style=\"width:900px;\" cellpadding=\"2\" cellspacing=\"0\" border=\"1\" bordercolor=\"#000000\"><tbody>\n" +
		        "<tr><td style=\"text-align: center; background-color: rgb(204, 204, 204);\"> 序号</td>\n" +
		        "<td style=\"text-align: center; background-color: rgb(204, 204, 204);\"> 姓名</td>\n" +
		        "<td style=\"text-align: center; background-color: rgb(204, 204, 204);\"> xxx</td>\n" +
		        "<td style=\"text-align: center; background-color: rgb(204, 204, 204);\">xxxx</td></tr>";

			String text ="Good good study,day day up";
		
		mailUtils.htmlMailMessage("标题", tabTitle + text + "</tbody></table>");

		
		System.out.println("111");
	}

}
